@model TigerLineScores.Models.Profile

@{
    ViewBag.Title = "Tiger Line Scores - Profile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    function SetPhotoDefault() {
        document.getElementById('photoLabel').value = "/Images/Default Profile Photo.jpg";
        document.getElementById('currentPhoto').src = "/Images/Default Profile Photo.jpg";
        Session["UserPhoto"] = "/Images/Default Profile Photo.jpg";
    };
</script>

<div style="border: 1px solid silver; border-radius: 5px; background-color: whitesmoke; padding: 20px; margin-bottom: 25px">
    <h3 style="font-style: italic; font-weight: bold; border-bottom:1px solid green; width: 350px ; float: left">TIGER LINE SCORES</h3>
    <img style="float: left; margin-left :25px" height="75" src="~/Images/Score_Card.jpg" />
    <h4 style="clear: both">PROFILE</h4>
</div>

@using (Html.BeginForm("Edit",
                                    "Profiles",
                                    FormMethod.Post,
                                                new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>@Session["UserName"]</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.ProfileID)
        @Html.HiddenFor(model => model.UserID)

        <div class="form-group">
            @Html.LabelFor(model => model.FirstName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.LastName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.LastName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.LastName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.HomeClubID, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.HomeClubID, null, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.HomeClubID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Handicap, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Handicap, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Handicap, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10" style="margin-bottom: 25px">
                <input type="submit" value="Save Profile" class="btn btn-primary" />
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Photo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <img id="currentPhoto" class="img-rounded" src="@Session["UserPhoto"]" style="width: 200px; border: 1px solid grey; box-shadow: 5px 5px 5px grey; margin-bottom: 5px" />
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    @Html.HiddenFor(model => model.Photo, htmlAttributes: new { id = "photoLabel" })
                    @if (Model.Photo != "/Images/Default Profile Photo.jpg")
                    {
                        <input type="submit" value="Remove Photo" onclick="SetPhotoDefault()" style="margin: 10px" class="btn btn-default" />
                    }
                    <label for="Profilephoto" class="btn btn-default">Select Photo</label>
                    <input type="file" name="Profilephoto" id="Profilephoto" class="well" onchange="this.form.submit();" style="visibility: hidden; margin: 10px" />
                </div>
            </div>
        </div>
    </div>
}


<script type="text/javascript">
    function showpopup() {
        document.getElementById("divpopup").className = "popupvisible-Success";
    }
    function hidepopup() {
        document.getElementById("divpopup").className = "popupnotvisible";
    }
</script>

<div id="divpopup" class="popupnotvisible">
    <img src="~/Images/tick.png" style="width: 20px" />&#160
    @TempData["EditMessage"]
    <button class="btn btn-xs btn-success" style="float: right" onclick="hidepopup()">close</button>
</div>

@if (TempData["EditMessage"] != null)
{
    <script type="text/javascript">
        showpopup()
    </script>
}



<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
